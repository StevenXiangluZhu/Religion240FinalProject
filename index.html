<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paths of Faith and Revolution</title>
    <style>
        :root {
            --gold: #D4AF37;
            --deep-red: #8B0000;
            --church-purple: #800080;
            --holy-blue: #1E90FF;
            --communist-red: #FF0000;
            --wheat: #F5DEB3;
            --dark-brown: #654321;
            --light-grey: #f5f5f5;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Georgia', serif;
        }

        body {
            background-color: #333;
            color: #f5f5f5;
            line-height: 1.6;
        }

        #game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-image: linear-gradient(to right, #654321, #8B0000);
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
        }
        
        .game-header::before {
            content: "☦";
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: var(--gold);
        }
        
        .game-header::after {
            content: "☭";
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: var(--communist-red);
        }

        h1 {
            font-size: 2.5em;
            color: var(--gold);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
        }

        h2 {
            font-size: 1.8em;
            color: var(--wheat);
            margin-bottom: 20px;
        }

        .intro-screen, .character-select, .scenario, .ending-screen {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        p {
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        button {
            background-color: var(--dark-brown);
            color: var(--wheat);
            padding: 12px 20px;
            border: 2px solid var(--gold);
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        button:hover {
            background-color: var(--gold);
            color: #333;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .choice-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .status-bar {
            display: flex;
            justify-content: space-around;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--gold);
        }

        .status-item {
            text-align: center;
        }

        .status-label {
            font-weight: bold;
            color: var(--gold);
            margin-bottom: 5px;
            font-size: 1em;
        }

        .status-value {
            font-size: 1.2em;
            color: var(--light-grey);
        }

        .character-cards {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .character-card {
            background-color: rgba(50, 50, 50, 0.8);
            border: 2px solid var(--gold);
            border-radius: 10px;
            padding: 15px;
            width: 200px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .character-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--holy-blue);
        }

        .character-card.selected {
            border-color: var(--communist-red);
            background-color: rgba(139, 0, 0, 0.3);
        }

        .character-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
            color: var(--gold);
        }

        .character-desc {
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .character-traits {
            font-style: italic;
            font-size: 0.9em;
            color: var(--wheat);
        }

        .image-container {
            text-align: center;
            margin: 20px 0;
            max-height: 200px;
            overflow: hidden;
            border-radius: 10px;
            border: 2px solid var(--gold);
        }

        .image-container img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .timeline-container {
            position: relative;
            padding: 20px 0;
            margin: 30px 0;
        }

        .timeline-track {
            height: 5px;
            background: linear-gradient(to right, var(--church-purple), var(--communist-red));
            border-radius: 5px;
            position: relative;
            margin: 0 auto;
        }

        .timeline-marker {
            width: 15px;
            height: 15px;
            background-color: var(--gold);
            border-radius: 50%;
            position: absolute;
            top: -5px;
            border: 2px solid var(--wheat);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transition: left 0.5s ease;
        }

        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .historical-note {
            background-color: rgba(30, 144, 255, 0.2);
            border-left: 4px solid var(--holy-blue);
            padding: 10px 15px;
            margin: 15px 0;
            font-style: italic;
        }

        .communist-note {
            background-color: rgba(255, 0, 0, 0.2);
            border-left: 4px solid var(--communist-red);
            padding: 10px 15px;
            margin: 15px 0;
        }

        .christian-note {
            background-color: rgba(128, 0, 128, 0.2);
            border-left: 4px solid var(--church-purple);
            padding: 10px 15px;
            margin: 15px 0;
        }

        .ending-title {
            color: var(--gold);
            font-size: 2em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .stats-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            width: 45%;
            text-align: center;
        }

        .stat-title {
            color: var(--gold);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .icon-display {
            display: flex;
            justify-content: center;
            gap: 5px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .icon {
            font-size: 1.5em;
        }

        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .character-cards {
                flex-direction: column;
                align-items: center;
            }

            .character-card {
                width: 80%;
            }

            .stats-display {
                flex-direction: column;
            }

            .stat-item {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="game-header">
            <h1>Paths of Faith and Revolution</h1>
            <h2>A Journey Through Christianity and Communism</h2>
        </div>
        
        <div class="intro-screen fade-in">
            <p>Welcome to "Paths of Faith and Revolution," an interactive exploration of the complex relationship between Christianity and Communism throughout history. Through this journey, you'll navigate critical moments where faith and revolutionary politics intersected, making choices that reflect different perspectives and approaches.</p>
            
            <p>Both Christianity and Communism have offered powerful visions for human community, justice, and transformation. Both have shaped world history in profound ways. Their relationship has been marked by conflict, cooperation, and complex dialogue.</p>
            
            <p>As you play, you'll accumulate different values representing your approach to these traditions:</p>
            
            <div class="christian-note">
                <strong>Faith:</strong> Your connection to Christian spiritual traditions and teachings
            </div>
            
            <div class="communist-note">
                <strong>Revolution:</strong> Your commitment to radical social change and economic justice
            </div>
            
            <div class="historical-note">
                <strong>Historical Context:</strong> Key moments where Christianity and Communism have interacted throughout history will provide the background for your journey.
            </div>
            
            <div class="choice-buttons">
                <button id="start-btn">Begin Your Journey</button>
            </div>
        </div>
        
        <div class="character-select" style="display: none;">
            <h2>Choose Your Path</h2>
            <p>Select a starting perspective for your journey. Each character represents a different approach to the relationship between faith and revolutionary politics:</p>
            
            <div class="character-cards">
                <div class="character-card" data-character="theologian">
                    <div class="character-name">The Liberation Theologian</div>
                    <div class="character-desc">A Catholic priest from Latin America who sees Christ's message as a call for social justice and liberation of the oppressed.</div>
                    <div class="character-traits">Starting values: High Faith, Medium Revolution</div>
                </div>
                
                <div class="character-card" data-character="revolutionary">
                    <div class="character-name">The Christian Revolutionary</div>
                    <div class="character-desc">A worker and activist who believes that true revolution must incorporate spiritual values alongside material transformation.</div>
                    <div class="character-traits">Starting values: Medium Faith, High Revolution</div>
                </div>
                
                <div class="character-card" data-character="monk">
                    <div class="character-name">The Contemplative Monk</div>
                    <div class="character-desc">A monastic who practices communal living and believes in transforming society through spiritual discipline and example.</div>
                    <div class="character-traits">Starting values: High Faith, Low Revolution</div>
                </div>
                
                <div class="character-card" data-character="organizer">
                    <div class="character-name">The Labor Organizer</div>
                    <div class="character-desc">A factory worker who organizes labor movements and is skeptical of religion but sees potential allies in progressive Christians.</div>
                    <div class="character-traits">Starting values: Low Faith, High Revolution</div>
                </div>
            </div>
            
            <div class="choice-buttons">
                <button id="select-character-btn" disabled>Begin Journey</button>
            </div>
        </div>
        
        <div class="scenario" id="scenario-container" style="display: none;">
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-label">Faith</div>
                    <div class="status-value" id="faith-value">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Revolution</div>
                    <div class="status-value" id="revolution-value">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">Year</div>
                    <div class="status-value" id="year-value">1900</div>
                </div>
            </div>
            
            <h2 id="scenario-title">Scenario Title</h2>
            
            <div id="scenario-description">
                Scenario description goes here...
            </div>
            
            <div class="choice-buttons" id="choice-buttons">
                <!-- Choices will be populated here -->
            </div>
        </div>
        
        <div class="ending-screen" style="display: none;">
            <div class="ending-title" id="ending-title">Your Journey Ends</div>
            
            <p id="ending-description">Description of your ending goes here...</p>
            
            <div class="stats-display">
                <div class="stat-item">
                    <div class="stat-title">Faith Journey</div>
                    <div id="faith-final">0</div>
                    <div class="icon-display" id="faith-icons"></div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-title">Revolutionary Path</div>
                    <div id="revolution-final">0</div>
                    <div class="icon-display" id="revolution-icons"></div>
                </div>
            </div>
            
            <p>Your choices reflect one possible path through the complex relationship between Christianity and Communism. Both traditions continue to evolve and interact in our world today.</p>
            
            <div class="choice-buttons">
                <button id="restart-btn">Start New Journey</button>
            </div>
        </div>
    </div>
    
    <script>
        // Game state
        let gameState = {
            faith: 0,
            revolution: 0,
            year: 1900,
            character: "",
            scenarioIndex: 0,
            choiceHistory: []
        };
        
        // Character starting values
        const characterValues = {
            theologian: { faith: 8, revolution: 5 },
            revolutionary: { faith: 5, revolution: 8 },
            monk: { faith: 9, revolution: 2 },
            organizer: { faith: 2, revolution: 9 }
        };
        
        // Scenarios
        const scenarios = [
            {
                title: "Early Christian Communities (33-100 CE)",
                description: `<p>You find yourself reflecting on the early Christian communities as described in the Acts of the Apostles:</p>
                <div class="historical-note">"All who believed were together and had all things in common; they would sell their possessions and goods and distribute the proceeds to all, as any had need." (Acts 2:44-45)</div>
                <p>This communal approach to property and resources has sparked debate throughout Christian history. Some see it as a temporary arrangement for the early church, while others view it as a model for Christian economics.</p>
                <p>As you contemplate this historical moment, how do you interpret the early Christian approach to communal living?</p>`,
                choices: [
                    {
                        text: "These were spiritual communities united by faith, not political communes",
                        faithChange: 2,
                        revolutionChange: -1,
                        nextScenario: 1
                    },
                    {
                        text: "They show that Christianity originally embraced communal ownership",
                        faithChange: 1,
                        revolutionChange: 2,
                        nextScenario: 1
                    },
                    {
                        text: "These communities offered an alternative to both Roman imperialism and later capitalism",
                        faithChange: 1,
                        revolutionChange: 1,
                        nextScenario: 1
                    }
                ]
            },
            {
                title: "Monastic Communities (5th-6th Century)",
                description: `<p>The Rule of St. Benedict established a form of monastic communal living that would shape Christian monasticism for centuries.</p>
                <div class="christian-note">Benedict's rule required monks to reject personal property, share all possessions in common, distribute according to need, and engage in manual labor alongside prayer.</div>
                <p>As you consider the Benedictine model of community, you reflect on how it balanced spiritual commitments with economic practices.</p>
                <p>What aspects of monastic life do you find most significant for understanding the relationship between faith and communal economics?</p>`,
                choices: [
                    {
                        text: "Monasteries preserved spiritual tradition separate from worldly politics",
                        faithChange: 2,
                        revolutionChange: -1,
                        nextScenario: 2
                    },
                    {
                        text: "They demonstrated alternative economic models based on shared property",
                        faithChange: 0,
                        revolutionChange: 2,
                        nextScenario: 2
                    },
                    {
                        text: "They balanced contemplation with labor, showing both are needed",
                        faithChange: 1,
                        revolutionChange: 1,
                        nextScenario: 2
                    }
                ]
            },
            {
                title: "Peasant Revolts (16th Century)",
                description: `<p>It's 1525 in Germany. The Protestant Reformation is underway, and peasants have risen up against feudal lords, partly inspired by religious reformers like Thomas Müntzer who preach that the Kingdom of God requires social equality.</p>
                <div class="historical-note">Müntzer, a radical Protestant reformer, proclaimed: "All property should be held in common and should be distributed to each according to his needs, as the occasion required."</div>
                <p>Martin Luther initially expressed sympathy for the peasants but later condemned their uprising in harsh terms, calling for the nobility to "smite, slay, and stab" the rebellious peasants.</p>
                <p>Where do you stand in this conflict between religious reform and social revolution?</p>`,
                choices: [
                    {
                        text: "Luther was right - faith should transform hearts, not political structures",
                        faithChange: 1,
                        revolutionChange: -2,
                        nextScenario: 3
                    },
                    {
                        text: "Müntzer correctly understood that God's kingdom requires earthly justice",
                        faithChange: -1,
                        revolutionChange: 3,
                        nextScenario: 3
                    },
                    {
                        text: "Both missed that peaceful reform is possible through faith-inspired action",
                        faithChange: 1,
                        revolutionChange: 1,
                        nextScenario: 3
                    }
                ]
            },
            {
                title: "Marx and Religion (1843)",
                description: `<p>Karl Marx's critique of religion has profoundly shaped communist approaches to faith communities. You reflect on his famous statement:</p>
                <div class="communist-note">"Religion is the sigh of the oppressed creature, the heart of a heartless world, and the soul of soulless conditions. It is the opium of the people."</div>
                <p>This statement has been interpreted in various ways - as outright dismissal of religion, or as a more nuanced critique recognizing religion's dual nature as both a response to suffering and a force that can prevent social change.</p>
                <p>How do you interpret Marx's critique of religion?</p>`,
                choices: [
                    {
                        text: "Marx fundamentally misunderstood religion's positive role in human flourishing",
                        faithChange: 2,
                        revolutionChange: -2,
                        nextScenario: 4
                    },
                    {
                        text: "Marx correctly identified how religion often serves to maintain unjust social orders",
                        faithChange: -2,
                        revolutionChange: 2,
                        nextScenario: 4
                    },
                    {
                        text: "Marx captured religion's dual nature - it can both comfort and challenge",
                        faithChange: 0,
                        revolutionChange: 1,
                        nextScenario: 4
                    }
                ]
            },
            {
                title: "Russian Revolution (1917-1922)",
                description: `<p>The Bolshevik Revolution has succeeded in Russia. The new Soviet government embarks on an aggressive campaign against religious institutions, confiscating church property and arresting clergy.</p>
                <div class="historical-note">Lenin wrote: "Every religious idea, every idea of God, even flirting with the idea of God, is unutterable vileness... of the most dangerous kind, 'contagion' of the most abominable kind."</div>
                <p>At the same time, some Christians see positive aspects in the revolution's goals of equality and justice, even as they reject atheism and religious persecution.</p>
                <p>How do you respond to the early Soviet approach to religion?</p>`,
                choices: [
                    {
                        text: "Religious persecution reveals communism's fundamental incompatibility with faith",
                        faithChange: 2,
                        revolutionChange: -3,
                        nextScenario: 5
                    },
                    {
                        text: "The church had become corrupt and aligned with oppressors; reform was necessary",
                        faithChange: -2,
                        revolutionChange: 2,
                        nextScenario: 5
                    },
                    {
                        text: "Soviet anti-religious violence betrayed the revolution's emancipatory potential",
                        faithChange: 1,
                        revolutionChange: 0,
                        nextScenario: 5
                    }
                ]
            },
            {
                title: "Worker Priests Movement (1940s)",
                description: `<p>In post-WWII France, the "worker-priest" movement emerges. Catholic priests take jobs in factories, live among workers, join labor unions, and participate in strikes.</p>
                <div class="christian-note">One worker-priest explains: "The working class will never come to the Church. The Church must go to the working class."</div>
                <p>The Vatican eventually reins in the movement, concerned about priests becoming too involved in politics and influenced by Marxism.</p>
                <p>Do you support the worker-priest approach to ministry?</p>`,
                choices: [
                    {
                        text: "Priests should remain focused on spiritual guidance, not political activism",
                        faithChange: 1,
                        revolutionChange: -2,
                        nextScenario: 6
                    },
                    {
                        text: "This movement shows how Christians should actively participate in class struggle",
                        faithChange: -1,
                        revolutionChange: 3,
                        nextScenario: 6
                    },
                    {
                        text: "Worker-priests built bridges between faith and labor movements, which is valuable",
                        faithChange: 1,
                        revolutionChange: 1,
                        nextScenario: 6
                    }
                ]
            },
            {
                title: "Liberation Theology (1970s)",
                description: `<p>Liberation theology emerges in Latin America, combining Christian theology with socio-economic analyses to address poverty and oppression. Theologians like Gustavo Gutiérrez argue that God has a "preferential option for the poor."</p>
                <div class="historical-note">In El Salvador, Archbishop Oscar Romero becomes an outspoken advocate for the poor against military oppression. He is assassinated while celebrating Mass in 1980.</div>
                <p>The Vatican under Pope John Paul II and Cardinal Ratzinger criticizes liberation theology for its use of Marxist analysis and emphasis on political liberation.</p>
                <p>What is your view of liberation theology?</p>`,
                choices: [
                    {
                        text: "It dangerously conflates Christian salvation with political revolution",
                        faithChange: 1,
                        revolutionChange: -2,
                        nextScenario: 7
                    },
                    {
                        text: "It correctly identifies that authentic faith must fight structural injustice",
                        faithChange: 0,
                        revolutionChange: 3,
                        nextScenario: 7
                    },
                    {
                        text: "It offers valuable insights but should maintain distinctly Christian identity",
                        faithChange: 2,
                        revolutionChange: 1,
                        nextScenario: 7
                    }
                ]
            },
            {
                title: "Fall of Communist Regimes (1989-1991)",
                description: `<p>The Berlin Wall falls in 1989, and the Soviet Union dissolves in 1991. State atheism ends in former communist countries, and religious practice resurges.</p>
                <div class="historical-note">Churches played significant roles in resistance movements, like Solidarity in Poland, which was strongly supported by Pope John Paul II.</div>
                <p>Many declare communism a failed experiment, while others argue that the ideals of social and economic equality remain valid despite the failures of authoritarian communist states.</p>
                <p>How do you interpret these historical developments?</p>`,
                choices: [
                    {
                        text: "They prove that materialist ideologies ultimately fail where faith endures",
                        faithChange: 3,
                        revolutionChange: -2,
                        nextScenario: 8
                    },
                    {
                        text: "Soviet communism failed, but the struggle for economic justice continues",
                        faithChange: -1,
                        revolutionChange: 2,
                        nextScenario: 8
                    },
                    {
                        text: "They show both systems need reform toward human-centered values",
                        faithChange: 1,
                        revolutionChange: 0,
                        nextScenario: 8
                    }
                ]
            },
            {
                title: "Contemporary Dialogue (Present Day)",
                description: `<p>Today, both Christianity and communist/socialist movements continue to evolve. Pope Francis has offered pointed critiques of capitalism while emphasizing the church's spiritual mission.</p>
                <div class="christian-note">Pope Francis: "The worship of the ancient golden calf has returned in a new and ruthless guise in the idolatry of money and the dictatorship of an impersonal economy."</div>
                <p>Meanwhile, various Christian socialist movements emphasize solidarity, cooperative economics, and care for creation alongside traditional faith commitments.</p>
                <p>Where do you see the most promising path forward for dialogue between faith traditions and movements for economic justice?</p>`,
                choices: [
                    {
                        text: "Faith communities should focus on spiritual and moral formation, not politics",
                        faithChange: 2,
                        revolutionChange: -2,
                        nextScenario: -1 // Ending
                    },
                    {
                        text: "Religious and revolutionary movements should unite against global capitalism",
                        faithChange: -1,
                        revolutionChange: 3,
                        nextScenario: -1 // Ending
                    },
                    {
                        text: "We need dialogue that preserves the unique insights of both traditions",
                        faithChange: 1,
                        revolutionChange: 1,
                        nextScenario: -1 // Ending
                    }
                ]
            }
        ];
        
        // Game ending types
        const endings = [
            {
                title: "The Contemplative Path",
                description: "You've chosen a journey that prioritizes spiritual tradition while remaining skeptical of revolutionary politics. You see faith as primarily concerned with personal transformation and eternal salvation, separate from worldly political struggles. Your path resembles traditional monastic or pietistic approaches to Christianity that emphasize prayer, ritual, and personal virtue over social activism.",
                requirement: function(state) {
                    return state.faith >= 15 && state.revolution <= 10;
                }
            },
            {
                title: "The Revolutionary Path",
                description: "Your journey has led you to embrace radical social change while maintaining a critical stance toward traditional religious institutions. You see religion primarily through its political and social implications, valuing faith traditions when they support liberation but questioning them when they don't. Your approach resembles secular socialist movements that acknowledge religion's potential progressive role while prioritizing material conditions.",
                requirement: function(state) {
                    return state.faith <= 10 && state.revolution >= 15;
                }
            },
            {
                title: "The Liberation Theology Path",
                description: "You've forged a path that integrates deep spiritual commitment with radical social critique. You see no contradiction between authentic Christian faith and the struggle for justice, believing that God's kingdom demands transformed social and economic relations. Your journey mirrors liberation theologians who find in scripture and tradition a preferential option for the poor and a call to solidarity.",
                requirement: function(state) {
                    return state.faith >= 15 && state.revolution >= 15;
                }
            },
            {
                title: "The Communitarian Path",
                description: "Your journey has balanced spiritual and social concerns, seeking middle ground between radical revolution and traditional faith. You value both religious traditions and social reform, but prefer gradual, community-based approaches over dramatic upheaval. Your path resembles Christian communitarian movements that create alternative economic practices while maintaining spiritual disciplines.",
                requirement: function(state) {
                    return state.faith >= 10 && state.faith <= 15 && state.revolution >= 10 && state.revolution <= 15;
                }
            },
            {
                title: "The Skeptical Seeker",
                description: "Your journey has led you to question both traditional religious institutions and revolutionary political movements. You remain open to insights from both traditions but wary of their excesses and claims to absolute truth. Your path resembles philosophical skeptics who value critical thinking and acknowledge the complexities of human social and spiritual life.",
                requirement: function(state) {
                    return state.faith < 10 && state.revolution < 10;
                }
            }
        ];
        
        // Time periods corresponding to scenario indices
        const timePeriods = [
            33, // Early Christian Communities
            500, // Monastic Communities
            1525, // Peasant Revolts
            1843, // Marx and Religion
            1917, // Russian Revolution
            1945, // Worker Priests Movement
            1970, // Liberation Theology
            1989, // Fall of Communist Regimes
            2025 // Contemporary Dialogue
        ];
        
        // UI Elements
        const introScreen = document.querySelector('.intro-screen');
        const characterSelect = document.querySelector('.character-select');
        const scenarioContainer = document.querySelector('#scenario-container');
        const endingScreen = document.querySelector('.ending-screen');
        
        const startBtn = document.querySelector('#start-btn');
        const selectCharacterBtn = document.querySelector('#select-character-btn');
        const restartBtn = document.querySelector('#restart-btn');
        
        const characterCards = document.querySelectorAll('.character-card');
        const choiceButtons = document.querySelector('#choice-buttons');
        
        const faithValue = document.querySelector('#faith-value');
        const revolutionValue = document.querySelector('#revolution-value');
        const yearValue = document.querySelector('#year-value');
        
        const scenarioTitle = document.querySelector('#scenario-title');
        const scenarioDescription = document.querySelector('#scenario-description');
        
        const endingTitle = document.querySelector('#ending-title');
        const endingDescription = document.querySelector('#ending-description');
        const faithFinal = document.querySelector('#faith-final');
        const revolutionFinal = document.querySelector('#revolution-final');
        const faithIcons = document.querySelector('#faith-icons');
        const revolutionIcons = document.querySelector('#revolution-icons');
        
        // Event Listeners
        startBtn.addEventListener('click', showCharacterSelect);
        selectCharacterBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', restartGame);
        
        characterCards.forEach(card => {
            card.addEventListener('click', () => {
                characterCards.forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                gameState.character = card.dataset.character;
                selectCharacterBtn.disabled = false;
            });
        });
        
        // Game Functions
        function showCharacterSelect() {
            introScreen.style.display = 'none';
            characterSelect.style.display = 'block';
            characterSelect.classList.add('fade-in');
        }
        
        function startGame() {
            // Set initial values based on character
            const startingValues = characterValues[gameState.character];
            gameState.faith = startingValues.faith;
            gameState.revolution = startingValues.revolution;
            gameState.year = timePeriods[0];
            gameState.scenarioIndex = 0;
            
            characterSelect.style.display = 'none';
            scenarioContainer.style.display = 'block';
            scenarioContainer.classList.add('fade-in');
            
            updateStatusDisplay();
            showScenario(gameState.scenarioIndex);
        }
        
        function showScenario(index) {
            const scenario = scenarios[index];
            scenarioTitle.textContent = scenario.title;
            scenarioDescription.innerHTML = scenario.description;
            
            // Update year
            gameState.year = timePeriods[index];
            yearValue.textContent = gameState.year;
            
            // Clear existing choices
            choiceButtons.innerHTML = '';
            
            // Add new choices
            scenario.choices.forEach(choice => {
                const button = document.createElement('button');
                button.textContent = choice.text;
                button.addEventListener('click', () => makeChoice(choice));
                choiceButtons.appendChild(button);
            });
        }
        
        function makeChoice(choice) {
            // Update stats
            gameState.faith += choice.faithChange;
            gameState.revolution += choice.revolutionChange;
            
            // Ensure stats don't go below 0
            gameState.faith = Math.max(0, gameState.faith);
            gameState.revolution = Math.max(0, gameState.revolution);
            
            // Record choice
            gameState.choiceHistory.push(choice);
            
            // Update display
            updateStatusDisplay();
            
            // Move to next scenario or end game
            if (choice.nextScenario >= 0) {
                gameState.scenarioIndex = choice.nextScenario;
                showScenario(choice.nextScenario);
                scenarioContainer.scrollTop = 0;
            } else {
                endGame();
            }
        }
        
        function updateStatusDisplay() {
            faithValue.textContent = gameState.faith;
            revolutionValue.textContent = gameState.revolution;
            yearValue.textContent = gameState.year;
        }
        
        function endGame() {
            scenarioContainer.style.display = 'none';
            endingScreen.style.display = 'block';
            endingScreen.classList.add('fade-in');
            
            // Determine ending
            let playerEnding = endings[4]; // Default to Skeptical Seeker
            
            for (let i = 0; i < endings.length; i++) {
                if (endings[i].requirement(gameState)) {
                    playerEnding = endings[i];
                    break;
                }
            }
            
            // Display ending
            endingTitle.textContent = playerEnding.title;
            endingDescription.textContent = playerEnding.description;
            
            // Display final stats
            faithFinal.textContent = `Faith: ${gameState.faith}`;
            revolutionFinal.textContent = `Revolution: ${gameState.revolution}`;
            
            // Display icons
            faithIcons.innerHTML = '';
            revolutionIcons.innerHTML = '';
            
            for (let i = 0; i < Math.min(gameState.faith, 20); i++) {
                const icon = document.createElement('span');
                icon.textContent = '☦';
                icon.className = 'icon';
                faithIcons.appendChild(icon);
            }
            
            for (let i = 0; i < Math.min(gameState.revolution, 20); i++) {
                const icon = document.createElement('span');
                icon.textContent = '☭';
                icon.className = 'icon';
                revolutionIcons.appendChild(icon);
            }
        }
        
        function restartGame() {
            // Reset game state
            gameState = {
                faith: 0,
                revolution: 0,
                year: 1900,
                character: "",
                scenarioIndex: 0,
                choiceHistory: []
            };
            
            // Reset UI
            endingScreen.style.display = 'none';
            introScreen.style.display = 'block';
            introScreen.classList.add('fade-in');
            
            // Reset character selection
            characterCards.forEach(card => card.classList.remove('selected'));
            selectCharacterBtn.disabled = true;
        }
    </script>
</body>
</html>
